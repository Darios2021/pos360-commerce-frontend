server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # ---- Bloqueo de rutas t√≠picas de scanners (silencioso) ----
  location ~* ^/(graphql|api|api-docs|swagger|swagger-ui|swagger-ui\.html|v2/api-docs|v3/api-docs|actuator|server-status|telescope|debug|webjars|_all_dbs|v2/_catalog) {
    return 404;
  }

  location ~* ^/(\.env|\.git|\.DS_Store|info\.php|wp-admin|wp-login\.php) {
    return 404;
  }

  # ---- SPA fallback ----
  location / {
    try_files $uri $uri/ /index.html;
  }

  # ---- Cache de assets ----
  location /assets/ {
    expires 30d;
    add_header Cache-Control "public, immutable";
    try_files $uri =404;
  }

  location = /index.html {
    add_header Cache-Control "no-store";
  }

  gzip on;
  gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}
